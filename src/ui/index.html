<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi App Electron</title>
  <link rel="stylesheet" href="./bootstrap.min(2).css">
</head>
<body>
  <h1>Productos</h1>
  <form id="product-form">
    <input type="text" id="nombre" placeholder="Nombre" required>
    <br>
    <input type="text" id="tipo" placeholder="Tipo" required>
    <br>
    <input type="text" id="marca" placeholder="Marca" required>
    <br>
    <input type="text" id="estiloGraduacion" placeholder="Estilo Graduacion" required>
    <br>
    <input type="number" id="cantidad" placeholder="Cantidad" required>
    <br>
    <input type="number" id="stock_critico" placeholder="Stock Crítico" required>
    <br>
    <input type="text" id="id_proveedor" placeholder="ID Proveedor" required>
    <br>
    <button type="submit">Agregar Producto</button>
  </form>
  <ul id="product-list"></ul>

  <!-- Botón para abrir la página de proveedores -->
  <button id="open-providers">Ver Proveedores</button>

  <script>
    const form = document.getElementById('product-form');
    const productList = document.getElementById('product-list');
    const openProvidersButton = document.getElementById('open-providers');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const product = {
        nombre: form.nombre.value,
        tipo: form.tipo.value,
        marca: form.marca.value,
        estiloGraduacion: form.estiloGraduacion.value,
        cantidad: form.cantidad.value,
        stock_critico: form.stock_critico.value,
        id_proveedor: form.id_proveedor.value,
      };
      const newProduct = await window.api.createProduct(product);
      console.log('Product created:', newProduct);
      form.reset();
      loadProducts();
    });

    openProvidersButton.addEventListener('click', () => {
      window.api.openProvidersWindow();
    });

    async function loadProducts() {
      const products = await window.api.getProducts();
      productList.innerHTML = '';
      products.forEach(product => {
        const li = document.createElement('li');
        li.textContent = `${product.nombre} - ${product.marca}`;
        productList.appendChild(li);
      });
    }
    loadProducts();
  </script>
</body>
</html>
